!function t(e,r,o){function s(n,i){if(!r[n]){if(!e[n]){var l="function"==typeof require&&require;if(!i&&l)return l(n,!0);if(a)return a(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return s(r?r:t)},u,u.exports,t,e,r,o)}return r[n].exports}for(var a="function"==typeof require&&require,n=0;n<o.length;n++)s(o[n]);return s}({1:[function(t,e,r){!function(){"use strict";var e=angular.module("baseapp",["ui.router","ngSanitize","ui.bootstrap","ngAnimate"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/myhbr"),t.state("home",{abstract:!0,url:"/myhbr",templateUrl:"./dist/routes/home/home.template.html",data:{title:"MyHBR",requireAuth:!1},controller:"homeCtrl",controllerAs:"home"}).state("home.login",{url:"",templateUrl:"./dist/routes/login/login.template.html",data:{title:"Ingresar",requireAuth:!1},controller:"loginCtrl",controllerAs:"login"}).state("home.register",{url:"/register",templateUrl:"./dist/routes/register/register.template.html",data:{title:"Registrar",requireAuth:!1},controller:"registerCtrl",controllerAs:"register"}).state("dashboard",{url:"/myhbr/dashboard",params:{isAdmin:0},templateUrl:"./dist/routes/dashboard/dashboard.template.html",data:{title:"Dashboard",requireAuth:!0},controller:"dashboardCtrl",controllerAs:"dashboard"}).state("dashboard.comming_soon",{url:"/comming-soon",templateUrl:"./dist/routes/comming_soon/comming_soon.template.html",data:{title:"Comming Soon",requireAuth:!0},controller:"commingSoonCtrl",controllerAs:"commingSoon"}).state("dashboard.profile",{url:"/profile",templateUrl:"./dist/routes/profile/profile.template.html",data:{title:"Perfil",requireAuth:!0},controller:"profileCtrl",controllerAs:"profile"}).state("dashboard.shopping",{url:"/shopping",templateUrl:"./dist/routes/shopping/shopping.template.html",data:{title:"Comprar",requireAuth:!0},controller:"shoppingCtrl",controllerAs:"shopping"}).state("dashboard.shopping_list",{url:"/shopping/list",templateUrl:"./dist/routes/shopping_list/shopping_list.template.html",data:{title:"Lista de compras",requireAuth:!0},controller:"shoppingListCtrl",controllerAs:"shoppingList"}).state("dashboard.checkout",{url:"/shopping/checkout",params:{paymentGatewayUrl:null},templateUrl:"./dist/routes/checkout/checkout.template.html",data:{title:"Checkout",requireAuth:!0},controller:"checkoutCtrl",controllerAs:"checkout"}).state("dashboard.success",{url:"/shopping/checkout/success/token",templateUrl:"./dist/routes/success/success.template.html",data:{title:"Pago Exitoso",requireAuth:!0},controller:"successCtrl",controllerAs:"success"}).state("dashboard.error",{url:"/shopping/checkout/error",templateUrl:"./dist/routes/error/error.template.html",data:{title:"Error",requireAuth:!0},controller:"errorCtrl",controllerAs:"error"}).state("dashboard.users",{url:"/usuarios",templateUrl:"./dist/routes/users/users.template.html",data:{title:"Adm. usuarios",requireAuth:!0},controller:"usersCtrl",controllerAs:"users"}).state("dashboard.process_payments",{url:"/pagos",templateUrl:"./dist/routes/process_payments/process_payments.template.html",data:{title:"Procesar Pagos",requireAuth:!0},controller:"processPaymentsCtrl",controllerAs:"processPayments"})}]).run(["$rootScope","$state","$stateParams","authenticationService",function(t,e,r,o){t.$state=e,t.$stateParams=r,t.$on("$stateChangeSuccess",function(t,r,s,a,n){r.data.requireAuth?(console.log(r.data.requireAuth),o.checkAuth().then(function(t){console.log(t),t.data.isLogged||e.go("home.login")})):"home"!=r.name&&"home.login"!=r.name||o.checkAuth().then(function(t){t.data.isLogged&&e.go("dashboard")})})}]);t("./routes/home/home.js")(angular,e),t("./routes/login/login.js")(angular,e),t("./routes/register/register.js")(angular,e),t("./routes/dashboard/dashboard.js")(angular,e),t("./routes/checkout/checkout.js")(angular,e),t("./routes/success/success.js")(angular,e),t("./routes/error/error.js")(angular,e),t("./routes/users/users.js")(angular,e),t("./routes/process_payments/process_payments.js")(angular,e),t("./routes/shopping/shopping.js")(angular,e),t("./routes/shopping_list/shopping_list.js")(angular,e),t("./routes/profile/profile.js")(angular,e),t("./services/authentication/authentication.js")(angular,e),t("./components/navbar/navbar.js")(angular,e)}()},{"./components/navbar/navbar.js":2,"./routes/checkout/checkout.js":3,"./routes/dashboard/dashboard.js":4,"./routes/error/error.js":5,"./routes/home/home.js":6,"./routes/login/login.js":7,"./routes/process_payments/process_payments.js":8,"./routes/profile/profile.js":9,"./routes/register/register.js":10,"./routes/shopping/shopping.js":11,"./routes/shopping_list/shopping_list.js":12,"./routes/success/success.js":13,"./routes/users/users.js":14,"./services/authentication/authentication.js":15}],2:[function(t,e,r){function o(t,e){"use angular template";function r(t,e){function r(t,e,r){t.$watch(function(){return sessionStorage.sskey},function(e,r){t.isLogged=sessionStorage.getItem("sskey")||!1,t.username=sessionStorage.getItem("username")||""},!0)}function o(){function r(){e.logout().then(function(){t.go("home.login",{reload:!0})},function t(t){console.log(t)})}function o(){s.logout=r}var s=this;o()}return{restrict:"E",replace:!0,templateUrl:"./dist/components/navbar/navbar.template.html",link:r,controllerAs:"navbar",controller:o}}e.directive("navbar",r),r.$inject=["$state","authenticationService"]}e.exports=o},{}],3:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e,r,o,s){function a(t){return s.trustAsResourceUrl(t)}function n(){i.paymentGatewayUrl=r.params.paymentGatewayUrl,i.trustSrc=a}var i=this;n()}e.controller("checkoutCtrl",r),r.$inject=["$http","$filter","$state","$scope","$sce"]}e.exports=o},{}],4:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e){function r(){s.collapse=!s.collapse}function o(){s.collapse=!1,s.collapse_sidebar=r,s.isAdmin=sessionStorage.getItem("isAdmin")||0}var s=this;o()}e.controller("dashboardCtrl",r),r.$inject=["$http","$state"]}e.exports=o},{}],5:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e){function r(){}r()}e.controller("errorCtrl",r),r.$inject=["$http","$state"]}e.exports=o},{}],6:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t){function e(){}e()}e.controller("homeCtrl",r),r.$inject=["$http"]}e.exports=o},{}],7:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e,r){function o(){r.login(a.user).then(function(t){console.log(t),t.data.errors?(a.loginError=t.data.errors.loginError,a.loginForm.username.$invalid=!0,a.loginForm.password.$invalid=!0,a.loginForm.$invalid=!0):(sessionStorage.setItem("sskey",t.data.sskey),sessionStorage.setItem("isAdmin",t.data.isAdmin),sessionStorage.username=t.data.name+" "+t.data.lastname,e.go("dashboard",{isAdmin:t.data.isAdmin,reload:!0}),a.loginForm.username.$invalid=!1,a.loginForm.username.$valid=!0,a.loginForm.password.$invalid=!1,a.loginForm.password.$valid=!0,a.loginForm.$invalid=!1,a.loginForm.$valid=!0)})}function s(){a.user={},a.login=o}var a=this;s()}e.controller("loginCtrl",r),r.$inject=["$http","$state","authenticationService"]}e.exports=o},{}],8:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e,r,o,s){function a(t,e,r){s.open({templateUrl:"myModalContent.html",controller:"modaProcessCtrl",controllerAs:"modaProcess",size:t,resolve:{venta:function(){return e},products:function(){return r}}})}function n(t,e){a("md",t,e)}function i(){t.get("./dist/php/shopping.php",{params:{action:"getAll"}}).then(function(t){l.ventas=t.data.ventas,l.processPayment=n})}var l=this;i()}function o(t,e,r,o,s,a,n,i,l,c){function u(){o.dismiss("cancel")}function p(){c.post("./dist/php/encrypt.php",{timestamp:Math.round((new Date).getTime()/1e3)}).then(function(t){m.successUrl="http://tucourier.com.ar/myhbr/dashboard/shopping/checkout/success/"+t.data,m.token=t.data})}function d(){c.put("./dist/php/shopping.php",{paymentGatewayUrl:m.paymentGatewayUrl,id:m.venta.id,token:m.token}).then(function(t){e.reload(),o.dismiss("cancel")})}function h(){m.venta=i,m.products=l,c.get("./dist/php/users.php",{params:{action:"getUserById",id:m.venta.uid}}).then(function(t){m.user=t.data}),m.cancel=u,m.send=d,m.generateToken=p}var m=this;h()}e.controller("processPaymentsCtrl",r),r.$inject=["$http","$filter","$state","$scope","$uibModal"],e.controller("modaProcessCtrl",o),o.$inject=["$scope","$state","$filter","$uibModalInstance","$sce","$compile","$rootScope","venta","products","$http"]}e.exports=o},{}],9:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t){function e(){}e()}e.controller("profileCtrl",r),r.$inject=["$http"]}e.exports=o},{}],10:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e,r){function o(){console.log(a.user),r.register(a.user).then(function(t){t.data.errors?(t.data.errors.existingEmail?(a.existingEmail=t.data.errors.existingEmail,a.registerForm.email.$invalid=!0,a.registerForm.$invalid=!0):(a.existingEmail=!1,a.registerForm.email.$invalid=!1,a.registerForm.email.$valid=!0),t.data.errors.passwordError?(a.passwordError=t.data.errors.passwordError,a.registerForm.password.$invalid=!0,a.registerForm.password2.$invalid=!0,a.registerForm.$invalid=!0):(a.passwordError=!1,a.registerForm.password.$invalid=!1,a.registerForm.password.$valid=!0,a.registerForm.password2.$invalid=!1,a.registerForm.password2.$valid=!0),t.data.errors.telError?(a.telError=t.data.errors.telError,a.registerForm.tel.$invalid=!0,a.registerForm.cel.$invalid=!0,a.registerForm.$invalid=!0):(a.telError=!1,a.registerForm.tel.$invalid=!1,a.registerForm.tel.$valid=!0,a.registerForm.cel.$invalid=!1,a.registerForm.cel.$valid=!0)):a.success=!0})}function s(){a.user={},a.register=o,a.success=!1;var t={componentRestrictions:{country:"ar"}},e=document.getElementById("address"),r=(new google.maps.places.Autocomplete(e,t),{types:["(cities)"],componentRestrictions:{country:"ar"}}),s=document.getElementById("localidad");new google.maps.places.Autocomplete(s,r)}var a=this;s()}e.controller("registerCtrl",r),r.$inject=["$http","$state","authenticationService"]}e.exports=o},{}],11:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e){function r(){t.get("./dist/php/users.php",{params:{sskey:sessionStorage.getItem("sskey"),action:"getUserBySskey"}}).then(function(t){n.purchase.user=t.data})}function o(){console.log(n.purchase),t.post("./dist/php/shopping.php",{peso_excedente:n.purchase.peso_excedente,parcial_price:n.purchase.parcial_price,peso_total:n.purchase.peso_total,tasas:n.purchase.tasas,total:n.purchase.total,total_quantity:n.purchase.total_quantity,transporte:n.purchase.transporte,products:n.purchase.products,userId:n.purchase.user.id,method:"POST"}).then(function(t){t.data.errors&&console.log(t.data.errors.error),t.data.success&&e.go("dashboard.shopping_list",{reload:!0})})}function s(){n.purchase.data.price=n.purchase.data.quantity*n.purchase.data.price,n.purchase.data.weight=n.purchase.data.quantity*n.purchase.data.weight,n.purchase.products.push(n.purchase.data),n.purchase.parcial_price=n.purchase.parcial_price+n.purchase.data.price,n.purchase.total_quantity=parseInt(n.purchase.total_quantity)+parseInt(n.purchase.data.quantity),n.purchase.peso_total=n.purchase.peso_total+n.purchase.data.weight,n.purchase.total=0,n.purchase.total=n.purchase.parcial_price,n.purchase.data={},n.shoppingForm_purchase.$valid=!0,n.shoppingForm_purchase.$setPristine(),n.shoppingForm_purchase.$submitted=!1,console.log(n.purchase)}function a(){n.purchase={user:{},data:{},products:[],parcial_price:0,peso_total:0,peso_excedente:0,transporte:0,excedente_peso:0,tasas:0,total:0,total_quantity:0},n.collapse_personal=!0,n.collapse_purchase=!0,n.collapse_list=!0,n.add_purchase=s,n.finish=o,r()}var n=this;a()}e.controller("shoppingCtrl",r),r.$inject=["$http","$state"]}e.exports=o},{}],12:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e,r,o,s){function a(t){r.go("dashboard.checkout",{paymentGatewayUrl:t.paymentGatewayUrl,reload:!0})}function n(t){console.log(t)}function i(t,e){s.open({templateUrl:"myModalContent.html",controller:"modalMoreInfoCtrl",controllerAs:"seeMore",size:t,resolve:{items:function(){return e}}})}function l(t){i("md",t)}function c(){t.get("./dist/php/shopping.php",{params:{action:"getAll"}}).then(function(t){console.log(t.data.ventas),u.ventas=t.data.ventas,u.moreInfo=l,u.downloadBill=n,u.pay=a})}var u=this;c()}function o(t,e,r,o,s,a,n,i,l){function c(){o.dismiss("cancel")}function u(){p.products=i,p.cancel=c}var p=this;u()}e.controller("shoppingListCtrl",r),r.$inject=["$http","$filter","$state","$scope","$uibModal"],e.controller("modalMoreInfoCtrl",o),o.$inject=["$scope","$state","$filter","$uibModalInstance","$sce","$compile","$rootScope","items","$http"]}e.exports=o},{}],13:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e,r){function o(){t.post("./dist/php/validate_success.php",{token:r.token}).then(function(t){t.data.validate||e.go("dashboard.error",{},{reload:!0})})}o()}e.controller("successCtrl",r),r.$inject=["$http","$state","$stateParams"]}e.exports=o},{}],14:[function(t,e,r){function o(t,e){"use strict";"use angular template";function r(t,e,r,o,s){function a(t,e){s.open({templateUrl:"edituser.html",controller:"modalEditUserCtrl",controllerAs:"modalEditUser",size:t,resolve:{user:function(){return e}}})}function n(t,e){s.open({templateUrl:"deleteuser.html",controller:"modalDeleteUserCtrl",controllerAs:"modalDeleteUser",size:t,resolve:{user:function(){return e}}})}function i(t){a("md",t)}function l(t){n("md",t)}function c(t){alert(t)}function u(){t.get("./dist/php/users.php").then(function(t){p.users=t.data.users}),p.editUser=i,p.removeUser=l,p.changePrivileges=c}var p=this;u()}function o(t,e,r,o,s,a,n,i,l){function c(){o.dismiss("cancel")}function u(){}function p(){d.user=i,d.cancel=c,d.edit=u}var d=this;p()}function s(t,e,r,o,s,a,n,i,l){function c(){o.dismiss("cancel")}function u(){}function p(){d.user=i,d.cancel=c,d.deleteUser=u}var d=this;p()}e.controller("usersCtrl",r),r.$inject=["$http","$filter","$state","$scope","$uibModal"],e.controller("modalEditUserCtrl",o),o.$inject=["$scope","$state","$filter","$uibModalInstance","$sce","$compile","$rootScope","user","$http"],e.controller("modalDeleteUserCtrl",s),s.$inject=["$scope","$state","$filter","$uibModalInstance","$sce","$compile","$rootScope","user","$http"]}e.exports=o},{}],15:[function(t,e,r){function o(t,e){function r(t,e){this.checkAuth=function(){return t.post("./dist/php/session.php",{sskey:sessionStorage.getItem("sskey")})},this.login=function(r){e.defer();return t.get("./dist/php/users.php",{params:{username:r.username,password:r.password,action:"login"}})},this.logout=function(){var r=e.defer();return t.post("./dist/php/users.php",{sskey:sessionStorage.getItem("sskey"),method:"POST",action:"logout"}).success(function(t){sessionStorage.clear(),r.resolve()}).error(function(t){r.reject(t)}),r.promise},this.register=function(r){e.defer();return t.post("./dist/php/users.php",{name:r.name,lastname:r.lastname,tel:r.tel,cel:r.cel,codeType:r.codeType.toString(),idCode:r.idCode,email:r.email,address:r.address,localidad:r.localidad,postalCode:r.postalCode,password:r.password,password2:r.password2,method:"POST",action:"register"})}}e.service("authenticationService",r),r.$inject=["$http","$q"]}e.exports=o},{}]},{},[1]);