<div class="stock-rooms container-fluid" ng-cloak>
    <link rel="stylesheet" type="text/css" href="./hbr-selfie/dist/routes/wh-box/stock-rooms/stock-rooms.css">
    <h3> <i class="fa fa-cubes"></i>{{::stockRooms.lang.room.title}}</h3>
    <hr>
    <div class="action-menu">
        <div ng-if="stockRooms.isAdmin == 0" class="col-xs-2">
            <div class="input-group">
                <button class="btn btn-hbr-blue" ng-click="stockRooms.addBox()"><i class="fa fa-plus"></i> Agregar caja</button>
            </div>
        </div>
        <div ng-class="stockRooms.isAdmin == 1 ? 'col-xs-12': 'col-xs-10'">
            <div class="input-group">
                <input id="{{filterField}}" type="text" class="form-control" placeholder="{{::stockRooms.lang.room.filter.placeholder}}" ng-model="stockRooms.searchBy">
                <span class="input-group-btn">
                    <div class="btn-group">
                        <div uib-dropdown is-open="status.isopen">
                            <button class="btn btn-hbr-blue" uib-dropdown-toggle type="button">{{ stockRooms.filterName }} <span class="caret"></span></button>
                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                    <li ng-if="stockRooms.isAdmin == 1" role="menuitem"><a ng-click="stockRooms.setFilter('company_name', stockRooms.lang.room.filter.list.client_name)">{{::stockRooms.lang.room.filter.list.client_name}}</a></li>
                    <li role="menuitem"><a ng-click="stockRooms.setFilter('id',stockRooms.lang.room.filter.list.box_id)">{{::stockRooms.lang.room.filter.list.box_id}}</a></li>
                    <li ng-if="stockRooms.isAdmin == 1" role="menuitem"><a ng-click="stockRooms.setFilter('age', 'Box Age')">Box Age</a></li>
                    <li role="menuitem"><a ng-click="stockRooms.setFilter('bill',stockRooms.lang.room.filter.list.bill)">{{::stockRooms.lang.room.filter.list.bill}}</a></li>
                    <li role="menuitem"><a ng-click="stockRooms.setFilter('warehouse_name', 'Warehouse')">Warehouse</a></li>
                    <li role="menuitem"><a ng-click="stockRooms.setFilter('', stockRooms.lang.room.filter.default)">{{::stockRooms.lang.room.filter.list.remove}}</a></li>
                </ul>
            </div>
        </div>
        <span class="btn-group">
                <button class="btn btn-hbr-blue btn-search" ng-click="stockRooms.applyFilter()"><i class="fa fa-search"></i></button>
            </span>
        </span>
    </div>
</div>
<div class="col-xs-12" ng-if="stockRooms.multipleFilter.length">
    <div class="filterBoxes">
        <div class="badge" ng-repeat="filter in stockRooms.multipleFilter track by $index"><span>{{ filter.filterName }}: {{ filter.searchBy }}</span><a ng-click="stockRooms.removeFilter($index)"><i class="fa fa-close"></i></a></div>
    </div>
</div>
</div>
<div class="boxes col-xs-12">
    <div class="help-block" ng-if="!stockRooms.filteredBoxes.length">
        <h3 class="text-center">{{::stockRooms.lang.room.filter.not_found}}</h3>
    </div>

    <div class="stock-card col-xs-4" ng- ng-repeat="box in stockRooms.filteredBoxes" ng-if="stockRooms.filteredBoxes.length">
        <div class="stock-card__header clearfix">
            <h4 class="pull-left">Box #{{box.id}}</h4>
            <h4 ng-if="stockRooms.isAdmin == 1" class="pull-right">{{box.user.company_name}}</h4>
        </div>
        <ul class="stock-card__data">
            <li><b>{{::stockRooms.lang.box.bill}}:</b> {{box.bill}}</li>
            <li ng-if="stockRooms.isAdmin == 1"><b>Age:</b> {{box.age}} days</li>
            <li><b>{{::stockRooms.lang.box.created}}:</b> {{ box.created * 1000 | date : "dd/MM/yyyy" }}</li>
            <li><b>{{::stockRooms.lang.box.short_desc}}:</b> {{box.short_desc}}</li>
            <li><b>Warehouse:</b> {{box.warehouse.warehouse_name}}</li>
        </ul>
        <div class="stock-card__footer">
            <span>{{::stockRooms.lang.box.weight}}: {{box.box_weight}} Kg.</span>
            <span>Stock: {{box.box_stock}}</span>
            <span><i class="fa" popover-is-open="isOpen" ng-class="!isOpen ? 'fa-search' : 'fa-close'" uib-popover-template="'stock-card-info.html'" popover-class="help" popover-placement="top" data-toggle="popover" popover-trigger="outsideClick"></i></span>
        </div>
    </div>
</div>
<div class="footer">
    <span>{{::stockRooms.lang.room.weight}}: {{stockRooms.room.weight }} Kg.</span>
    <span>{{::stockRooms.lang.room.stock}}:  {{stockRooms.room.stock}}  </span>
    <span>{{::stockRooms.lang.room.box_qty}}:  {{stockRooms.filteredBoxes.length }}  </span>
    <span>{{::stockRooms.lang.room.value}}: {{stockRooms.room.room_val | currency }} </span>
    <span>{{::stockRooms.lang.room.shipping_val}}: {{stockRooms.room.shipping_val | currency }} </span>
    <span>{{::stockRooms.lang.room.warehouse_val}}: {{stockRooms.room.warehouse_val | currency }} </span>
</div>
</div>
</div>
<div ng-include="'hbr-selfie/dist/routes/wh-box/stock-rooms/box.template.html'"></div>